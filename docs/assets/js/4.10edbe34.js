(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{206:function(s,t,a){s.exports=a.p+"assets/img/Screenshot_7.2ad46cc3.png"},207:function(s,t,a){s.exports=a.p+"assets/img/Screenshot_8.f50ba805.png"},208:function(s,t,a){s.exports=a.p+"assets/img/Screenshot_9.c1913dd7.png"},216:function(s,t,a){"use strict";a.r(t);var e=a(0),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker-compose"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[s._v("#")]),s._v(" Docker compose")]),s._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#docker-compose-yml"}},[s._v("docker-compose.yml")])]),e("li",[e("a",{attrs:{href:"#dockers-commands"}},[s._v("Dockers commands")])]),e("li",[e("a",{attrs:{href:"#автоматическая-перегрузка-контейнеров-restarts"}},[s._v("Автоматическая перегрузка контейнеров (restarts)")])]),e("li",[e("a",{attrs:{href:"#создание-допоnнитеnьных-сервисов-scale-nginx-load-balancer"}},[s._v("Создание дополнительных сервисов (scale, nginx, load-balancer)")])])])]),e("p"),s._v(" "),e("hr"),s._v(" "),e("h3",{attrs:{id:"docker-compose-yml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml"}},[s._v("#")]),s._v(" docker-compose.yml")]),s._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# when starting containers - docker automatically")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# makes network for specified services(containers)")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# where they can see each other")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# service same as container here")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redis'")]),s._v("\n  \n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node-app")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ./node"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("app\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4001:8081'")]),s._v("\n")])])]),e("h3",{attrs:{id:"dockers-commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockers-commands"}},[s._v("#")]),s._v(" Dockers commands")]),s._v(" "),e("p",[e("img",{attrs:{src:a(206),alt:""}})]),s._v(" "),e("br"),s._v(" "),e("p",[e("img",{attrs:{src:a(207),alt:""}})]),s._v(" "),e("h3",{attrs:{id:"автоматическая-перегрузка-контейнеров-restarts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#автоматическая-перегрузка-контейнеров-restarts"}},[s._v("#")]),s._v(" Автоматическая перегрузка контейнеров (restarts)")]),s._v(" "),e("p",[s._v("Коды при которых перегрузиться контейнер")]),s._v(" "),e("ul",[e("li",[s._v("0 - ОК, это нормальный код окончания процесса (always)")]),s._v(" "),e("li",[s._v("1, ... - от 1 и дальше, это уже ненормальное окончание процесса (on-failure)")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(208),alt:""}}),s._v(" "),e("strong",[s._v("'no'")]),s._v(" - должны быть в кавычках, потому что в "),e("code",[s._v("yml")]),s._v(" это как "),e("strong",[s._v("false")])]),s._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# when starting containers - docker automatically")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# makes network for specified services(containers)")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# where they can connect each other")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# service same as container here")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redis'")]),s._v("\n  \n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node-app")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ./node"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("app\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'8000:8000'")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("depends_on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n")])])]),e("h3",{attrs:{id:"создание-допоnнитеnьных-сервисов-scale-nginx-load-balancer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#создание-допоnнитеnьных-сервисов-scale-nginx-load-balancer"}},[s._v("#")]),s._v(" Создание дополнительных сервисов (scale, nginx, load-balancer)")]),s._v(" "),e("p",[s._v("Также надо изменить свой docker-compose в соотвествии с "),e("a",{attrs:{href:"https://pspdfkit.com/blog/2018/how-to-use-docker-compose-to-run-multiple-instances-of-a-service-in-development/",target:"_blank",rel:"noopener noreferrer"}},[s._v("инструкциями"),e("OutboundLink")],1)]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker-compose up --scale web=3\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);